<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="src/favicon.ico" type="image/x-icon">


  <!-- ======= META SIGNATURE ======= -->
  <meta name="author" content="Aditya">
  <meta name="description"
    content="Computer-Based Training System developed by Aditya Choudhary(Computer Science Graduate | Developer | Scholar)">
  <meta name="keywords"
    content="CBT, Computer Science, Aditya Choudhary, Web Development, JavaScript, Tailwind, Education, GitHub">
  <meta name="github" content="https://github.com/adiityachoudhary">
  <link rel="icon" href="src/favicon.ico" type="image/x-icon">


  <title>CBT-MR Procedure</title>
  <style>
    /* ---- Layout ---- */
    :root {
      --accent: #d8d600;
      --bg: #071e2b
    }

    html,
    body {
      height: 100%;
      margin: 0;
      font-family: Inter, system-ui, Segoe UI, Roboto, Arial;
      background-color: rgb(182, 244, 255);
    }

    .container {
      position: relative;
      max-width: 1100px;
      margin: 18px auto;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(2, 10, 18, 0.45)
    }

    img.map {
      width: 100%;
      height: auto;
      display: block;
      user-select: none
    }

    /* Overlay layer where markers live (keeps positions responsive) */
    .overlay {
      position: absolute;
      inset: 0;
      pointer-events: none
    }

    .marker {
      position: absolute;
      width: 26px;
      height: 26px;
      border-radius: 6px;
      background: var(--accent);
      color: #111;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, .25);
      transform: translate(-50%, -50%);
      cursor: pointer;
      pointer-events: auto;
      border: 2px solid #111
    }

    .marker:hover {
      transform: translate(-50%, -50%) scale(1.12)
    }

    .marker .hint {
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, .8);
      color: #a93535;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      display: none
    }

    .marker:focus {
      outline: 3px solid rgba(0, 0, 0, .12)
    }

    /* ---- Modal/backdrop ---- */
    .backdrop {
      position: fixed;
      inset: 0;
      background: rgba(2, 8, 10, 0.55);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 600
    }

    .backdrop.show {
      display: flex
    }

    /* the popup that covers ~80% of the viewport centered */
    .popup {
      width: 80vw;
      max-width: 1200px;
      height: 80vh;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 20px 60px rgba(3, 12, 18, .6);
      overflow: auto;
      transform: scale(0.9);
      opacity: 0;
      transition: transform 360ms cubic-bezier(.2, .9, .3, 1), opacity 360ms cubic-bezier(.2, .9, .3, 1);
      will-change: transform, opacity
    }

    .popup.show {
      transform: scale(1);
      opacity: 1
    }

    /* header inside popup */
    .popup-header {
      position: sticky;
      top: 0;
      background: linear-gradient(90deg, #061e29, #0a2a36);
      color: #fff;
      padding: 14px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px
    }

    .title {
      font-weight: 700
    }

    .close-btn {
      background: transparent;
      border: 0;
      color: #fff;
      font-size: 20px;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, .06)
    }

    .popup-body {
      padding: 18px 20px;
      color: #122;
      line-height: 1.45
    }

    .meta {
      font-size: 13px;
      color: #334;
      opacity: .8;
      margin-bottom: 8px
    }

    .big {
      font-size: 90%;
      background: #f7f7f7;
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #eee
    }

    /* small responsive tweaks */
    @media (max-width:680px) {
      .popup {
        width: 92vw;
        height: 86vh
      }

      .marker {
        width: 22px;
        height: 22px
      }
    }
  </style>
</head>

<body>

  <div class="container" id="mapWrap">
    <!-- Replace 'src/map.jpg' with your file name or path. Keep the overlay and markers percentages. -->
    <img class="map" src="src/map.jpg" alt="Sortie map" />

    <div class="overlay" id="overlay" aria-hidden="false"></div>
  </div>

  <!-- Backdrop + popup (hidden until marker clicked) -->
  <div class="backdrop" id="backdrop" aria-hidden="true">
    <div class="popup" role="dialog" aria-modal="true" aria-labelledby="popupTitle" id="popup">
      <div class="popup-header">
        <div>
          <div id="popupTitle" class="title">Point Title</div>
          <div id="popupSub" class="meta">Coords: 0%, 0% â€” ETA: â€”</div>
        </div>
        <button class="close-btn" id="popupClose" aria-label="Close popup">âœ•</button>
      </div>
      <div class="popup-body" id="popupBody">
        <p class="big">Point detail content will show here. Use the points[] array in the script to set content for each
          marker. This area can hold protocols, next-point directives, and images.</p>
      </div>
    </div>
  </div>

  <script>
    /*
      FIXED points[]: converted from your original 1080Ã—808 px coordinates into percentages.
      Format: { id, x (left%), y (top%), label, title, sub, content }
    */
    const points = [
      /* 1*/ {
        id: 'P01', x: 60.83, y: 33.54, label: '1', title: 'Point 1', sub: '',
        content: `<ul style="font-family:Arial; font-size:25px; line-height:1.5;">
  <li><strong>START UP WITH GARUDA TOWER ON FREQUENCY 127.9 MHz</strong></li>
  <li><strong>COMCHECK AND AUTHENTICATION WITH MOC ON GROUND</strong></li>
  <li><strong>(MOC CALLSIGN) DE (OWN CALLSIGN) REQUEST AUTHENTICATION FOR (TIME IN IST)</strong></li>
  <li><strong>MOC PROVIDES AUTHENTICATION</strong></li>
  <li><strong>AUTHENTICATION CORRECT / INCORRECT</strong></li>
  <li><strong>REPEAT PROCESS IF AUTHENTICATION IS INCORRECT</strong></li>
</ul>

`},
      /* 2*/ {
        id: 'P02', x: 61.48, y: 38.86, label: '2', title: 'Point 2', sub: '', content: `
    <ul style="font-family:Arial; font-size:25px; line-height:1.5;">
  <li><strong>S/H ACTIVITY (MFALC)</strong></li>

  <li><strong>HF MESSAGE TO FIC </strong></li>
<ul type="square" style="font-family:Arial; line-height:1;">
  <li>CHN RDIO X2 ( OWN CALLSIGN ) ON 8861/6655 DEPARTURE (.) A/B KOCHI GARUDA ( TIME IN UTC  ) FOR EX AREA AND BACK VIA FPR (.) MNTNG (ALTITUDE IN FEET) FT ASML (.) ESTIMATING PT â€˜Qâ€™ ( TIME IN UTC  ) ENT EX AREA ( TIME IN UTC  ) EXIT EX AREA ( TIME IN UTC  ) AND ARRIVAL BACK TO KOCHI ( TIME IN UTC  ) GARUDA ENDURANCE ON DEP ( ENDURANCE IN HOURS AND MINUTES ) (.) POB ( NUMBER OF PEOPLE ON BOARD ) (.) SELCAL (SELCAL) (.) ( OWN CALLSIGN) (.)</li></ul>
<br>
  <li><strong>A/B CALL TO MOC</strong></li>
  <ul type="square" style="font-family:Arial; line-height:1;">
  <li>( MOC CALLSIGN ) DE ( OWN CALLSIGN ) (.) A/B KOCHI ( TIME IN IST ) MTG STRATA (ALTITUDE IN THOUSANDS OF FT) ESTIMATE X COAST ( TIME IN IST ) ON TASK ( TIME IN IST) OFF TASK ( TIME IN IST )  ETA BASE ( TIME IN IST ) ENDURANCE ON DEPARTURE ( ENDURANCE IN HOURS AND MINUTES ) POB ( NUMBER OF PEOPLE ON BOARD ) ( MOC CALLSIGN ) DE ( OWN CALLSIGN ) (.)</li></ul>
</ul>

`
      },
      /* 3*/ {
        id: 'P03', x: 62.78, y: 45.17, label: '3', title: 'Point 3', sub: '', content: `<ul style="font-family:Arial; font-size:25px; line-height:1.5;">

  <li><strong>TOC ACTIVITY</strong></li>
   <ul type="square" style="font-family:Arial; line-height:1;">
  <li>LEVEL OUT AND INCREASE SPEED TO 165</li>
   <li>CCN RDL DME</li>
    <li>FUEL AND SAFETY CHECKS</li>
     <li>UPDATE ETAS AND AN CARD</li>
  </ul>
  
</ul>

`
      },
      /* 4*/ {
        id: 'P04', x: 61.57, y: 49.13, label: '4', title: 'Point 4', sub: '', content: `<ul style="font-family:Arial; font-size:25px; line-height:1.5;">

  <li><strong> OBSTRUCTION *COPY DETAILS FROM IMAGE</strong></li>
  <li><strong> RSA CALCULATED USING THE FORMULA </strong></li>
  <li><strong> HIGHEST OBSTRUCTION (IN FT) + 10% OF HIGHEST OBSTRUCTION + 1500</strong></li>
</ul>

` },
      /* 5*/ {
        id: 'P05', x: 66.76, y: 44.18, label: '5', title: 'Point 5', sub: '', content: `<ul style="font-family:Arial; font-size:25px; line-height:1.5;">

  <li><strong>START UP WITH GARUDA TOWER ON FREQUENCY 127.9 MHz</strong></li>
  <li><strong> OBSTRUCTION *COPY DETAILS FROM IMAGE</strong></li>
  <li><strong> RSA CALCULATED USING THE FORMULA </strong></li>
  <li><strong> HIGHEST OBSTRUCTION (IN FT) + 10% OF HIGHEST OBSTRUCTION + 1500</strong></li>
</ul>

` },
      /* 6*/ {
        id: 'P06', x: 66.76, y: 67.70, label: '6', title: 'Point 6', sub: '', content: `
        <ul style="font-family:Arial; font-size:25px; line-height:1.5;">
            <li><strong>TURNING POINT ACTIVITY (AORTC)</strong></li>
                 <ul type="square" style="font-family:Arial; line-height:1;">
                     <li>X- COAST CALL TO MOC (IST) ( MOC CALLSIGN ) DE ( OWN CALLSIGN ) (.) X-COAST AT ( TIME IN IST ) MNTNG STRATA(ALTITUDE IN THOUSANDS OF FT) (.) NEXT CALL (TIME OF GIVING CALL IN IST + 30 MINS) DE (OWN CALLSIGN) B/T (CURRENT TIME + 1MIN ) (.) </li>
                 </ul>
        </ul>
        <ul style="font-family:Arial; font-size:25px; line-height:1.5;">
            <li><strong>POSITION REPORT TO FIC</strong></li>
                 <ul type="square" style="font-family:Arial; line-height:1;">
                     <li>CH RADIO X 2 ( OWN CALLSIGN ) ON 8861/6655 POSITION (.) CHECKED OVERHEAD PT â€˜Qâ€™  ( TIME IN IST ) (.) NEXT CALL (TIME OF GIVING CALL IN IST + 30 MINS) ( OWN CALL SIGN )</li>
                 </ul>
        </ul>
        
        
        `
      },
      /* 7*/ {
        id: 'P07', x: 72.87, y: 67.66, label: '7', title: 'Point 7', sub: '', content: `
        <ul style="font-family:Arial; font-size:25px; line-height:1.5; font-weight:bold">
                     <li>OBSTRUCTION *COPY DETAILS FROM IMAGE</li>
                     <li>RSA CALCULATED USING THE FORMULA </li>
                     <li>HIGHEST OBSTRUCTION (IN FT) + 10% OF HIGHEST OBSTRUCTION + 1500</li>
        </ul>`

      },
      /* 8*/ {
        id: 'P08', x: 62.59, y: 71.41, label: '8', title: 'Point 8', sub: '', content: `<ul style="font-family:Arial; font-size:25px; line-height:1.5; font-weight:bold">
                     <li>TAKE RDL DME FIX FROM TVM</li>
                     <li>CALCULATE AP W/V </li>
        </ul>

` },
      /* 9*/ {
        id: 'P09', x: 56.30, y: 76.24, label: '9', title: 'Point 9', sub: '', content: ` <ul style="font-family:Arial; font-size:25px; line-height:1.5;">
          <li><strong>ENTER EXERCISE AREA CALL TO FIC</strong></li>

          <ul type="square" style="font-family:Arial; font-size:25px; line-height:1.5;">
            <li>CHN RADIO X2 DE (OWN CALLSIGN) ON (8861/6655) (.) ENT EX AREA ( TIME IN UTC ) MNTNG (ALTIUDE IN FEET) FT AMSL (.) NEXT CALL (CALL TIME + 30 MINS)(.) DE (OWN CALLSIGN) (.) </li>

        </ul>
       </ul>

` },
      /*10*/ {
        id: 'P10', x: 52.78, y: 78.71, label: '10', title: 'Point 10', sub: '', content: ` <ul style="font-family:Arial; font-size:25px; line-height:1.5;">
          <li><strong>ON TASK REPORT TO MOC</strong></li>
      
          <ul type="square" style="font-family:Arial; font-size:25px; line-height:1.5;">
            <li>(MOC CALL SIGN) DE ( OWN CALL SIGN )(.) REP ON TASK ( TIME IN IST ) (.) MNTNG STRATA (ALTITUDE IN THOUSANDS OF FT) NEXT CALL (CALL TIME + 30 MINS) DE (OWN CALLSIGN)(.) B/T (TIME OF CALL + 1 MIN )(.) </li>
         </ul>

          <li><strong>   AUTHENTICATION WITH ACS   </strong></li>
          <ul type="square" style="font-family:Arial; font-size:25px; line-height:1.5;">
            <li> (ACS CALLSIGN) DE (OWN CALLSIGN) REQUEST AUTHENTIACTION FOR (TIME IN IST)(.)  ACS PROVIDES AUTHENTICATION. AUTHENTICATION CORRECT/ INCORRECT(.) REPEAT PROCESS IF AUTHENTICATION INCORRECT. </li>
         </ul>

          <li><strong>   JOINING REPORT WITH ACS   </strong></li>
          <ul type="square" style="font-family:Arial; font-size:25px; line-height:1.5;">
            <li> (ACS CALL SIGN) DE (OWN CALL SIGN) S/BY COPY JOINING REPORT (ACS CALL SIGN) DE (OWN CALL SIGN) READ BACK ONE MARIGOLD C/S (OWN CALLSIGN) APPROACHING YOU FROM SECTOR (NEWS) BEELINE (HDG) INDICATING (LAST KNOWN G/S) STRATA (ALTITUDE IN THOUSANDS OF FT) I STICK (OFF TASK TIME â€“ ON TASK TIME IN HRS AND MIN) MY CRYSTAL (HEALTHY IF RADAR IS WORKING / RUSTY IF RADAR NOT WORKING) GUESSER (BARKING IF IFF WORKING/ CHOCKED IF IFF NOT WORKING) P.O.B (PERSON ON BOARD) (OWN CALLSIGN) B/TIME (TIME OF CALL+ 1 MIN)  </li>
         </ul>

         <li><strong>   AUTHENTICATION WITH ACS   </strong></li>
          <ul type="square" style="font-family:Arial; font-size:25px; line-height:1.5;">
            <li> (ACS CALLSIGN) DE (OWN CALLSIGN) REQUEST AUTHENTIACTION FOR (TIME IN IST)(.)  ACS PROVIDES AUTHENTICATION. AUTHENTICATION CORRECT/ INCORRECT(.) REPEAT PROCESS IF AUTHENTICATION INCORRECT. </li>
         </ul>

         <li><strong>ACS REPEATS CALL</strong></li>
         <li><strong>READ BACK CORRECT/INCORRECT</strong></li>
         <li><strong>S/BY COPY JOINING INSTRUCTIONS</strong></li>

       </ul>

` },
      /*11*/ {
        id: 'P11', x: 46.76, y: 85.27, label: '11', title: 'Point 11', sub: '', content: ` <ul style="font-family:Arial; font-size:25px; line-height:1.5; ">
         <li><strong> PASS WEATHER REPORT TO MOC </strong></li>
              <ul type="square" style="font-family:Arial; font-size:25px; line-height:1.5; ">
                     <li>(MOC CALLSIGN) DE (OWN CALLSIGN)(.) S/BY TO COPY WX IN EX AREA (.) CLOUDS (1-8) OCTA, WIND ( EG: N-NW 10 KN) SEA STATE ( ____ ) SWELL ( ____ )(.) DE (OWN CALLSIGN)(.) B/T (TIME OF CALL + 1 MIN(.)
 </li>
        </ul>

` },
      /*12*/ {
        id: 'P12', x: 38.80, y: 93.32, label: '12', title: 'Point 12', sub: '', content: ` <ul style="font-family:Arial; font-size:25px; line-height:1.5; ">
                     <li><strong>TURNING POINT ACTIVITY (MLAC)</strong></li>
                     <li><strong>FUEL AND SAFETY CHECKS </strong></li>

                     <li><strong>ADDITIONAL POINTS  </strong></li>
                        <ul type="square" style="font-family:Arial; font-size:25px; line-height:1.5; ">
                          <li><strong> OPS NORMAL CALL TO MOC </strong></li>
                          <li> (MOC CALLSIGN) de (OWN CALLSIGN) REPORTING OPS NORMAL. MAINTATING STRATA ( ___ ) NEXT CALL ( TIME + 30 MINS ) DE ( OWN CALLSIGN ). B/T (CALL + 1 MIN) </li>
                        </ul>

                     <li><strong>OPS NORMAL TO FIC </strong></li>
                        <ul type="square" style="font-family:Arial; font-size:25px; line-height:1.5; ">
                          <li> CH RADIO (OWN CALLSIGN) ON 8861/6655(.) REPORTING OPS NORMAL IN EX AREA. MAINTAINING (ALTITUDE IN FEET) AMSL(.) NEXT CALL (CALL TIME + 30 MINS) (.) (OWN CALLSIGN) (.)</li>
                        </ul>
         </ul>

` },
      /*13*/ {
        id: 'P13', x: 29.35, y: 66.58, label: '13', title: 'Point 13', sub: '', content: ` <ul style="font-family:Arial; font-size:25px; line-height:1.5; ">
                     <li><strong><u>INCREASE SPEED TO 165</u></strong></li>
                     <li><strong><u>OFF TASK REPORT TO MOC AND ACS</u></strong></li>
                     <li>(MOC/ACS CALLSIGN) DE (OWN CALLSIGN)(.) PROCEEDING OFF TASK AT
(TIME IN IST)(.) MNTNG STRATA (ALTITUDE IN 1000â€™S OF FT)(Â·)ETA BASE (TIME IN IST)(.) DE (OWN CALLSIGN)() B/T (TIME + 1MIN)()
</li>
        </ul>

` },
      /*14*/ {
        id: 'P14', x: 35.19, y: 63.13, label: '14', title: 'Point 14', sub: '', content: ` <ul style="font-family:Arial; font-size:25px; line-height:1.5; font-weight:bold">
                     <li>COMMENCE PRE- DESCENT ACTIVITY</li>
        </ul>

` },
      /*15*/ {
        id: 'P15', x: 48.15, y: 52.10, label: '15', title: 'Point 15', sub: '', content: ` <ul style="font-family:Arial; font-size:25px; line-height:1.5;">
                     <li><strong>EXIT EX AREA CALL TO FIC </strong></li>
                        <ul type="square" style="font-family:Arial; font-size:25px; line-height:1.5; ">
                          <li> CHN RADIO X2 DE (OWN CALLSIGN) ON (8861/6655) (.) ENT EX AREA ( TIME IN UTC ) MNTNG (ALTIUDE IN FEET) FT AMSL (.) ARRIVAL KOCHI GARUDA ( TIME IN UTC )(.) DE (OWN CALLSIGN) (.) </li>
                        </ul>
        </ul>

` },
      /*16*/ {
        id: 'P16', x: 55.74, y: 46.53, label: '16', title: 'Point 16', sub: '', content: ` <ul style="font-family:Arial; font-size:25px; line-height:1.5; font-weight:bold">
                     <li>TOD ACTIVITY</li>
        </ul>

` },
      /*17*/ {
        id: 'P17', x: 60.83, y: 42.82, label: '17', title: 'Point 17', sub: '', content: ` <ul style="font-family:Arial; font-size:25px; line-height:1.5; font-weight:bold">
                     <li>APPROACH HOLDING FIX</li>
                     <li>CONTACT GARUDA APPROACH ON 124.7 MHz AND TAKE PERMISSION TO CARRY OUT IAP. </li>
                     <li>LANDING AND TAXY ON GARUDA TOWER 127.9 MHz.</li>
        </ul>

` },
      //   /*18*/ {id:'P18', x:60.93, y:33.54, label:'18', title:'Point 18', sub:'', content:'Details for point 18.'}
    ];

    const overlay = document.getElementById('overlay');
    const backdrop = document.getElementById('backdrop');
    const popup = document.getElementById('popup');
    const popupClose = document.getElementById('popupClose');
    const popupTitle = document.getElementById('popupTitle');
    const popupSub = document.getElementById('popupSub');
    const popupBody = document.getElementById('popupBody');

    // Build markers
    points.forEach(pt => {
      const m = document.createElement('button');
      m.className = 'marker';
      m.type = 'button';
      m.setAttribute('aria-label', pt.title || pt.id);
      m.setAttribute('title', pt.title || pt.id);
      m.setAttribute('tabindex', '0');

      // set position using percentages
      m.style.left = pt.x + '%';
      m.style.top = pt.y + '%';

      // small label inside marker
      m.innerHTML = '<span>' + pt.label + '</span>';

      // accessible keyboard activation
      m.addEventListener('click', () => showPopup(pt));
      m.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); showPopup(pt); } });

      overlay.appendChild(m);
    });

    function showPopup(point) {
      popupTitle.textContent = point.title || point.id;
      popupSub.textContent = (point.sub || '') + ` â€” Coords: ${point.x.toFixed(2)}%, ${point.y.toFixed(2)}%`;
      popupBody.innerHTML = `<div class="big">${point.content || 'No details provided.'}</div>`;

      backdrop.classList.add('show');
      // force reflow then add show for smooth scale transition
      requestAnimationFrame(() => popup.classList.add('show'));
      backdrop.setAttribute('aria-hidden', 'false');

      // trap focus inside popup for accessibility
      setTimeout(() => popupClose.focus(), 300);
    }

    function closePopup() {
      popup.classList.remove('show');
      backdrop.classList.remove('show');
      backdrop.setAttribute('aria-hidden', 'true');
    }

    popupClose.addEventListener('click', closePopup);

    // clicking backdrop outside popup closes it
    backdrop.addEventListener('click', (e) => { if (e.target === backdrop) closePopup(); });

    // ESC key to close
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && backdrop.classList.contains('show')) closePopup(); });

    // === Developer Signature ===
    console.log("%cðŸš€ CBT System Â© 2025 | Designed & Developed by Aditya Choudhary", "color: red; font-weight: bold; font-size: 14px;");
    console.log("%cðŸ”— GitHub: https://github.com/adiityachoudhary", "color: gray; font-size: 12px;");
  </script>
</body>

</html>